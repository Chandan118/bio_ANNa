# Bio ANNa: Autonomous Neuromorphic Navigation Architecture

![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)
![ROS Version](https://img.shields.io/badge/ROS%202-Galactic-orange.svg)
![Platform](https://img.shields.io/badge/Platform-Intel%20Loihi%202-brightgreen.svg)
![Status](https://img.shields.io/badge/Status-In%20Development-yellow.svg)

Bio ANNa translates desert-ant path integration and rodent cognitive mapping strategies into a modular ROS 2 stack designed for Intel’s Loihi 2 neuromorphic hardware. The repository contains a full Python implementation with simulated Loihi interfaces so the system can be exercised on any machine before deploying to real hardware.

---

## Core Features

- 🧠 **Neuromorphic core** – Simulated Loihi 2 spiking neural networks encapsulated behind a clean hardware abstraction layer.
- 🐜 **AntBot SNN Odometry** – Encodes IMU and wheel odometry into spikes and integrates motion with a leaky integrate-and-fire network.
- 🐀 **GridCore SNN Mapper** – Processes LiDAR scans, builds a sparse landmark map, and publishes pose corrections.
- 🤖 **Bayesian fusion engine** – Extended Kalman filter fusing AntBot odometry with GridCore corrections to produce `/odom/fused`.
- 🚀 **ROS 2 Galactic integration** – Packaged as an `ament_python` ROS 2 package with launch, config, and console entry points.

---

## Project Structure

```
bio_ANNa/
├── Dockerfile
├── README.md
├── requirements.txt
├── package.xml
├── setup.py
├── setup.cfg
├── resource/
│   └── bio_anna
├── config/
│   └── navigation_params.yaml
├── launch/
│   └── system.launch.py
├── notebooks/
│   ├── 1_data_analysis.ipynb
│   └── 2_snn_visualization.ipynb
├── src/
│   └── bio_anna/
│       ├── __init__.py
│       ├── nodes/
│       │   ├── antbot_snn_odometry_node.py
│       │   ├── gridcore_snn_mapper_node.py
│       │   ├── hardware_interface_node.py
│       │   └── navigation_control_node.py
│       └── utils/
│           ├── bayesian_fusion_engine.py
│           ├── loihi_interface.py
│           └── math_utils.py
├── datasets/                 # (placeholder for field data)
├── build/, install/, log/    # generated by colcon
└── Project File Structure    # quick reference mirror of this tree
```

---

## Quick Start (Recommended: Podman or Docker)

1. **Build the container**
   ```bash
   podman build --format docker -t bio_anna .
   ```

2. **Run a ROS-ready shell**
   ```bash
   podman run -it --rm localhost/bio_anna
   source /opt/ros/galactic/setup.bash
   source /root/ros2_ws/install/setup.bash
   ```

3. **Launch the full stack**
   ```bash
   ros2 launch bio_anna system.launch.py use_sim_time:=true
   ```
   The launch file starts:
   - `hardware_interface_node`
   - `antbot_snn_odometry_node`
   - `gridcore_snn_mapper_node`
   - `navigation_control_node`

4. **Publish synthetic sensor data (new shells, same sourcing)**
   ```bash
   # IMU yaw rate
   ros2 topic pub /imu/data sensor_msgs/msg/Imu \
     '{angular_velocity: {z: 0.05}}' -r 20

   # Wheel odometry
   ros2 topic pub /wheel_odometry/twist geometry_msgs/msg/TwistWithCovarianceStamped \
     '{twist: {twist: {linear: {x: 0.2}}}}' -r 20

   # Simple 2D scan
   ros2 topic pub /scan sensor_msgs/msg/LaserScan \
     '{angle_min:-1.0, angle_max:1.0, angle_increment:0.5,
       range_min:0.1, range_max:10.0,
       ranges:[1.0,1.2,0.9,1.4,0.8]}' -r 2
   ```

5. **Inspect fused outputs**
   ```bash
   ros2 topic echo /odom/antbot_snn
   ros2 topic echo /odom/fused
   ros2 topic echo /pose_correction/gridcore
   ```

Stop publishers with `Ctrl+C`; the launch terminates the nodes cleanly when you exit.

---

## Running Directly on Linux (Optional)

If you prefer a native Galactic workspace:

```bash
sudo apt update && sudo apt install ros-galactic-desktop python3-colcon-common-extensions
source /opt/ros/galactic/setup.bash
mkdir -p ~/ros2_ws/src && cd ~/ros2_ws/src
git clone https://github.com/<your-org>/bio_ANNa.git
cd ..
colcon build --symlink-install
source install/setup.bash
ros2 launch bio_anna system.launch.py
```

Install Python dependencies with:
```bash
pip3 install -r requirements.txt
```

---

## Nodes Overview

| Node | Description | Key Topics |
| --- | --- | --- |
| `hardware_interface_node` | Simulated hardware HAL producing IMU & wheel data | Publishes `/imu/data`, `/wheel_odometry/twist` |
| `antbot_snn_odometry_node` | Encodes sensor data into spikes, runs AntBot SNN, publishes odometry & TF | Subscribes `/imu/data`, `/wheel_odometry/twist`; publishes `/odom/antbot_snn`, TF |
| `gridcore_snn_mapper_node` | Extracts landmarks from scans, maintains cognitive map, emits corrections | Subscribes `/scan`, `/odom/fused`; publishes `/pose_correction/gridcore` |
| `navigation_control_node` | Extended Kalman filter + goal controller, publishes fused odometry & `cmd_vel` | Subscribes `/odom/antbot_snn`, `/pose_correction/gridcore`, `/goal_pose`; publishes `/odom/fused`, `/cmd_vel` |

---

## Configuration & Customisation

- **Parameters** – `config/navigation_params.yaml` is loaded by the launch file. Override it with `ros2 launch bio_anna system.launch.py params_file:=/path/to/custom.yaml`.
- **Neuromorphic interfaces** – `loihi_interface.py` simulates Loihi 2 behaviour. Replace with real SDK calls when deploying to hardware.
- **EKF tuning** – Adjust default variances in `BayesianFusionEngine` or feed measurement covariance in the ROS messages.

---

## Contributing

1. Fork and create a feature branch.
2. Ensure `python3 -m compileall src/bio_anna` passes.
3. Rebuild the container (`podman build …`) to confirm `colcon build` succeeds.
4. Submit a pull request with a clear summary of changes.

MIT licensed – see `LICENSE` (or replace with project-specific license).
